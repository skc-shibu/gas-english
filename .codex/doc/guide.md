# Codex 基本使い方ガイド

Codexを活用して開発を行う際の推奨ワークフローです。いきなりコードを生成するのではなく、「計画」と「実装」を分けることで、手戻りの少ない効率的な開発が可能になります。

## Step 1: プランモード（実装前のすり合わせ）

実装を始める前に、必ずプランモードを使用してAIと認識を合わせます。

* **起動方法**
  `Ctrl + Shift + P` または追加アイコンからプランモードに切り替えます。
* **目的**
  AIにこれから行う実装の「プラン（計画）」を作成させます。これにより、自分の作りたいものとAIの理解に相違がないかを事前に確認・調整することができます。
* **おすすめ設定**
  * **モデル:** `GPT-5.2`
  * **詳細度:** `中`

---

## Step 2: 実装モード（コーディング）

プランの内容を確認し、問題がなければ実際の実装（コーディング）へと移ります。

* **移行のタイミング**
  Step 1のプランモードで出力された計画に納得し、AIとの合意が取れた段階で移行します。
* **おすすめ設定**
  * **モデル:** `GPT-5.3-Codex`
  * **詳細度:** `中`

---

**💡 ポイント（効率よく使うためのコツ）:**

* **ワークフローの徹底:** 常に「プラン作成 ＞ 認識合わせ ＞ 実装」のサイクルを回すことで、精度の高いコード出力が期待できます。
* **コンテキストの管理:** 右下にある**コンテキストメーターが50%以上**になったら、情報の混線や精度の低下を防ぐため、**新しいチャットを作成（リセット）**することをおすすめします。

---

## このプロジェクトで機能追加するときの進め方（テンプレ）

このリポジトリ（GAS: `.gs`）は責務がファイルごとに分かれているため、**変更点を最小のファイルに閉じ込める**方針で進めると安全です。

### どのファイルに追加するか（目安）

* **入口（実行の流れ）を変える:** `Main.gs`（入口は薄く、実処理は他へ）
* **設定値を増やす:** `Config.gs`（`CONFIG_KEY` / `REQUIRED_CONFIG_KEYS` / `CONFIG_DEFAULTS`）＋ README の設定キー更新
* **シート/列/検証を増やす:** `Config.gs`（ヘッダ定義・検証）＋ `Sheets.gs`（取得・更新）
* **Geminiの出力を変える:** `Prompt.gs`（プロンプト）や `Gemini.gs`（生成パラメータ）
* **Chat投稿の形式を変える:** `Chat.gs`（変換・分割・投稿）

### Codex への依頼フォーマット（コピペ用）

下の箇条書きを埋めて依頼すると、実装のブレが減ります。

* **目的:** 何をできるようにしたいか（誰が/いつ/どこで使うか）
* **仕様:**
  * **入力:** どのシート/どの列/どの設定キー
  * **出力:** Chat投稿内容、シート更新、ログの追加列など
  * **例外時:** 失敗時に「済」を更新しない／ログは残す、など
* **受け入れ条件（チェックリスト）:** 動作確認の観点を箇条書きで
* **変更してよい範囲:** 触ってよいファイル、既存の関数名/シート仕様の維持条件など
* **制約:** Google Chat の書式制約、長文分割、セル文字数上限など
* **（任意）実装方針の希望:** 例: 「`Main.gs` は入口だけにしたい」

### おすすめの進め方

* **1機能=1依頼**で小さく始める（まず最小実装→必要なら次の依頼で改善）
* 仕様に**具体例を1つ**入れる（設定シートの例、投稿テキストの例など）
* 変更が入る場合は **README の「設定キー」「シート構成」「処理フロー」**も更新対象に含める
